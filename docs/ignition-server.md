# 点火服务

点火服务（Ignition Server）是火石平台的核心服务，负责整合各个子系统，提供统一的API入口和服务编排能力。

## 核心功能

- **服务网关**: 为其他子系统提供统一的API网关
- **服务编排**: 组合多个子服务实现复杂业务流程
- **系统状态监控**: 监控各个子系统的运行状态
- **数据聚合**: 聚合来自不同子系统的数据
- **权限管理**: 集成用户系统的权限管理

## 技术架构

- 基于NestJS框架构建
- 使用MongoDB存储系统配置和状态信息
- 支持微服务架构，通过消息队列实现服务间通信

## 启动服务

```bash
# 开发环境启动
pnpm dev-server:ig
```

## API文档

启动服务后，访问以下地址查看API文档：

```
http://localhost:3000/doc
```

## 与其他服务的集成

点火服务与系统中的其他服务紧密集成：

- **用户服务**: 获取用户认证和权限信息
- **物料服务**: 获取物料组件信息
- **DevOps服务**: 获取部署和环境信息

## 配置管理

点火服务的配置存储在MongoDB中，主要包括：

- 服务路由配置
- 系统状态监控配置
- 子系统集成配置
- 全局系统参数

## 部署架构

在生产环境中，点火服务部署为多实例集群，通过负载均衡实现高可用：

```
客户端 → 负载均衡器 → 点火服务集群 → 各子系统
```

## 扩展开发

### 添加新的服务集成

1. 在`src/modules`目录下创建新的模块
2. 实现服务接口和数据转换
3. 在`AppModule`中注册新模块
4. 添加路由配置

### 系统状态检查

点火服务提供了健康检查API：

```
GET /health
```

## 后续计划

- [ ] 实现服务限流和熔断
- [ ] 增强服务监控能力
- [ ] 优化服务编排性能
- [ ] 添加更多系统集成接口 